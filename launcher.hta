<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta charset="utf-8">
  <title>囲みマス</title>
  <script>
    moveTo(100, 100);
    resizeTo(400, 430);
    const shell = new ActiveXObject("Shell.Application");

    function exec(cmd, param) {
      shell.ShellExecute(cmd, param);
    }

    function installDeno() {
      exec("powershell", "iwr https://deno.land/x/install/install.ps1 -useb | iex");
    }

    function runServer() {
      exec("deno", "run -A apiserver/apiserver.ts");
    }

    function runClient(name) {
      exec('deno', 'run -A client_deno/' + name + ' --local');
    }

    function battle() {
      runClient(p1.value);
      setTimeout(function() {
        runClient(p2.value);
      }, 100);
      exec("http://localhost:8880/game/detail");
    }
  </script>
  <style>
    button, select, center {
      width: 100%;
      font-size: 30px;
    }
  </style>
</head>
<body>
  <center><img src="img/kakomimasu-logo.png" width="200"></center>
  <button onclick="installDeno()">
      Denoのインストール
  </button>
  <button onclick="runServer()">
    サーバの起動
  </button>
  <select name="p1">
  	<option value="client_a1.js">client_a1.js</option>
  	<option value="client_a2.js">client_a2.js</option>
  	<option value="client_a3.js">client_a3.js</option>
  	<option value="client_a4.js">client_a4.js</option>
  	<option value="client_a5.js">client_a5.js</option>
  	<option value="client_none.js">client_none</option>
  	<option value="client_a1.js">kacom</option>
  </select>
  <center>VS</center>
  <select name="p2">
  	<option value="client_a1.js">client_a1.js</option>
  	<option value="client_a2.js">client_a2.js</option>
  	<option value="client_a3.js">client_a3.js</option>
  	<option value="client_a4.js">client_a4.js</option>
  	<option value="client_a5.js">client_a5.js</option>
  	<option value="client_none.js">client_none.js</option>
  	<option value="client_a1.js">kacom.js</option>
  </select>
  <button onclick="battle()">
    対戦する
  </button>
</body>
</html>
