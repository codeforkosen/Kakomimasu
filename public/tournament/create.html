<!DOCTYPE html>
<html lang="ja">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="icon" type="image/png" href="/img/kakomimasu-icon.png">
    <link rel="apple-touch-icon" href="/img/kakomimasu-icon.png">

    <title>大会作成 - 囲みマス</title>
  </head>

  <body>
    <header id="header"></header>
    <main>
      <h1 id="title">大会作成</h1>
      <a class="button" href="index.html">大会一覧に戻る</a>
      <form id="tournament-form">
        <div>
          <label for="name">大会名*</label>
          <input type="text" id="name" required>
        </div>
        <div>
          <label for="organizer">主催</label>
          <input type="text" id="organizer">
        </div>

        <div>
          <label for="type">試合形式</label>
          <select id="type">
            <option value="round-robin">グループトーナメント</option>
            <!--<option value="knockout">勝ち残り式トーナメント</option>-->
          </select>
        </div>
        <div>
          <label for="participant">参加者(未実装)</label>
          <input type="text" id="participant">
        </div>
        <div>
          <label for="remarks">備考</label>
          <textarea type="text" id="remarks"></textarea>
        </div>

        <input id="create" type="button" class="button" value="大会を作成する" disabled>
      </form>

      <div id="created-game" hidden>
        <p>ゲーム作成完了！</p>
        <p>ゲームID：{{game.gameId}}</p>
      </div>
    </main>
    <footer id="footer"></footer>

    <script type="module">
      import { createTournament } from "/js/api-util.js";

      const form = document.forms["tournament-form"];
      form.onchange = () => {
        form["create"].disabled = !form.checkValidity();
      }
      form["create"].onclick = async (e) => {
        const name = form["name"].value;
        const organizer = form["organizer"].value;
        const type = form["type"].value;
        const remarks = form["remarks"].value;

        console.log(name, organizer, type, remarks);

        const data = {
          name, organizer, type, remarks
        }
        await createTournament(data);

        location.href = "/tournament/index.html";
      }
    </script>

    <script type="module" src="/js/vue-comp/common.js"></script>
  </body>

</html>

<style>
  @import url("/css/common.css");
  @import url("/css/c_form.css");

  form {
    padding: 10px 0;
  }
</style>